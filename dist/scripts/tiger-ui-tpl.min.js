angular.module("ui.tiger",["ui.tiger.tpl","ui.tiger.datepicker","ui.tiger.routerTabs"]),angular.module("ui.tiger.tpl",["scripts/directives/tiger-router-tabs/tiger-router-tab.html","scripts/directives/tiger-router-tabs/tiger-router-tabs.html","scripts/directives/tiger-datepicker/tiger-datepicker.html"]),angular.module("scripts/directives/tiger-router-tabs/tiger-router-tab.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/tiger-router-tabs/tiger-router-tab.html","<li ng-transclude class=\"tiger-router-tab\" ng-click=\"select()\" ng-class=\"{'active': active, 'first': first(), 'last': last()}\">\n</li>")}]),angular.module("scripts/directives/tiger-router-tabs/tiger-router-tabs.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/tiger-router-tabs/tiger-router-tabs.html",'<div class="tiger-router-tabs-wrapper">\n    <a class="left-angle" href="javascript:void(0);"><i class="fa fa-angle-left"></i></a>\n\n    <div class="tiger-router-tabs-slider">\n        <ul class="nav tiger-router-tabs">\n            <tiger-router-tab ng-repeat="routerTab in routerTabs" active="routerTab.active">\n                <a href="javascript:void(0);"><span>{{routerTab.label}}</span><i ng-show="$index > 0" class="icon icon-close"></i></a>\n            </tiger-router-tab>\n        </ul>\n    </div>\n\n    <div class="down-angle-wrapper dropdown" uib-dropdown>\n        <a class="down-angle dropdown-toggle" href="javascript:void(0);" uib-dropdown-toggle><i class="fa fa-angle-double-down"></i></a>\n        <ul class="dropdown-menu" uib-dropdown-menu>\n            <li ng-click="closeAll()">\n                <a href="javascript:void(0);"><i class="icon icon-close-red"></i>关闭所有标签</a>\n            </li>\n            <li class="divider"></li>\n            <li ng-repeat="routerTab in routerTabs" ng-click="select(routerTab)">\n                <a href="javascript:void(0);">\n                    <i class="icon icon-empty" ng-class="{\'icon-check-blue\': currentStateEqualTo(routerTab)}"></i>\n                    {{routerTab.label}}\n                    <i ng-show="$index > 0" class="icon icon-close" ng-click="close(routerTab)"></i>\n                </a>\n            </li>\n        </ul>\n    </div>\n\n    <a class="right-angle" href="javascript:void(0);"><i class="fa fa-angle-right"></i></a>\n</div>')}]),angular.module("scripts/directives/tiger-datepicker/tiger-datepicker.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/tiger-datepicker/tiger-datepicker.html",'<p class="input-group tiger-datepicker-wrapper">\n    <input type="text" class="form-control"\n           readonly="readonly"\n           ng-model="date"\n           is-open="status.opened"\n           uib-datepicker-popup\n           datepicker-options="dateOptions"/>\n    <span class="input-group-btn">\n        <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n    </span>\n</p>')}]),angular.module("ui.tiger.routerTabs",[]).controller("tigerRouterTabsCtrl",["$scope","$sessionStorage","$rootScope","$state","$timeout","$element",function(a,b,c,d,e,f){function g(b){for(var c=0;c<a.routerTabs.length;c++)if(a.routerTabs[c].name==b.name)return!0;return!1}function h(a){return d.includes(a.name)}function i(){}var j=a.currentStateEqualTo=function(a){return d.is(a.name)},k=this,l=k.tabs=a.tabs=[];if(k.first=function(a){return l[0]==a},k.last=function(a){return l[l.length-1]==a},k.select=function(b){for(var c=null,e=0;e<l.length;e++)l[e]==b?(a.routerTabs[e].active=!0,c=a.routerTabs[e]):a.routerTabs[e].active=!1;j(c)||d.go(c.name)},k.addTab=function(a,b){a.$element=b,l.push(a),i()},k.close=function(b){var c=l.indexOf(b);a.$apply(function(){a.routerTabs[c].active&&d.go(a.routerTabs[c-1].name),a.routerTabs.splice(c,1)})},k.removeTab=function(a){var b=l.indexOf(a);l.splice(b,1),i()},a.routerTabs||(a.routerTabs=b.routerTabs||[]),0==a.routerTabs.length){var m=c.home||{label:"控制台",name:"app.home"};a.routerTabs.push(m),d.current.name!=m.name&&a.routerTabs.push({label:d.current.label,name:d.current.name})}a.updateTabs=function(c,d,e,f,i){arguments.length>1&&(g(d)||a.routerTabs.push({label:d.label,name:d.name}));for(var j=0;j<a.routerTabs.length;j++)a.routerTabs[j].active=h(a.routerTabs[j]);b.routerTabs=a.routerTabs},a.select=function(b){for(var c=0;c<a.routerTabs.length;c++)a.routerTabs[c].active=!1;b.active=!0,j(b)||d.go(b.name)},a.close=function(b){var c=a.routerTabs.indexOf(b);a.routerTabs[c].active&&d.go(a.routerTabs[c-1].name),a.routerTabs.splice(c,1)},a.closeAll=function(){a.routerTabs=a.routerTabs.slice(0,1),d.go(a.routerTabs[0].name)},a.updateTabs()}]).directive("tigerRouterTabs",["$rootScope","$state","$timeout","$sessionStorage","$window",function(a,b,c,d,e){var f=1024,g=175;return{restrict:"EA",replace:!0,scope:{rules:"@"},controller:"tigerRouterTabsCtrl",templateUrl:"scripts/directives/tiger-router-tabs/tiger-router-tabs.html",link:function(b,c){function d(a,c,d,e,f){h.test(c.name)&&b.updateTabs(a,c,d,e,f)}var h=new RegExp(b.rules),i=a.$on("$stateChangeSuccess",d),j=a.$on("$stateChangeError",d),k=a.$on("$stateChangeCancel",d),l=a.$on("$stateNotFound",d);b.$on("$destroy",i),b.$on("$destroy",j),b.$on("$destroy",k),b.$on("$destroy",l),b.resizeWrapper=function(){var a=angular.element(e).width(),b=f-g,d=a-g;c.width(d>b?d:b)},angular.element(e).bind("resize",function(){b.resizeWrapper()}),b.resizeWrapper()}}}]).directive("tigerRouterTab",["$timeout",function(a){return{require:"^tigerRouterTabs",restrict:"EA",replace:!0,transclude:!0,scope:{active:"=?"},templateUrl:"scripts/directives/tiger-router-tabs/tiger-router-tab.html",controller:function(){},link:function(a,b,c,d){d.addTab(a,b),a.select=function(){d.select(a)},a.first=function(){return d.first(a)},a.last=function(){return d.last(a)},b.find(".icon-close").click(function(b){b.stopPropagation(),d.close(a)}),a.$on("$destroy",function(){d.removeTab(a)})}}}]),angular.module("ui.tiger.datepicker",[]).controller("tigerDatepickerCtrl",["$scope","uibDatepickerPopupConfig",function(a,b){a.status={opened:!1},a.dateOptions={showWeeks:!1,"class":"tiger-datepicker"},a.open=function(b){a.status.opened=!0},b.currentText="今天",b.clearText="清除",b.closeText="关闭"}]).directive("tigerDatepicker",function(){return{restrict:"EA",replace:!0,require:["tigerDatepicker","^ngModel"],scope:{},controller:"tigerDatepickerCtrl",templateUrl:"scripts/directives/tiger-datepicker/tiger-datepicker.html",link:function(a,b,c,d){var e=(d[0],d[1]);e.$render=function(){a.date=e.$viewValue},a.$watch("date",function(){e.$setViewValue(a.date)})}}});